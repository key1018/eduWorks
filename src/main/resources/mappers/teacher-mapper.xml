<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="teacherMapper">

	<resultMap id="teacherResult" type="Teacher">
		<result column="class_no" property="classNo" />
		<result column="class_title" property="classTitle" />
		<result column="class_content" property="classContent" />
		<result column="class_objective" property="classObjective" />
		<result column="class_subject" property="classSubject" />
		<result column="class_student" property="classStudent" />
		<result column="class_start_date" property="classStartDate" />
		<result column="class_end_date" property="classEndDate" />
		<result column="mem_no" property="memNo" />
		<result column="class_approval" property="classApproval" />
		<result column="class_fee" property="classFee" />
		<result column="class_signup_date" property="classSignupDate" />
		<result column="mem_name" property="memName" />
	</resultMap>
	
	
	
	<select id="selectListCount" resultType="_int">
		select
		       count(*)
		  from tb_class
		 where class_status = 'Y'
	</select>

	<select id="appAllListSelect" resultMap="teacherResult">
		select
		       class_no
		     , class_title
		     , class_content
		     , class_objective
		     , class_subject
		     , class_student
		     , class_start_date
		     , class_end_date
		     , c.mem_no
		     , class_approval
		     , class_fee
		     , class_signup_date
		     , mem_name
		  from tb_class c
		  join tb_member m on(c.mem_no = m.mem_no)
         order
            by class_no desc
	</select>
	
	<insert id="appEnrollFormInsert">
		insert
		  into tb_class
		  (
		    class_no
		  , class_title
		  , class_content
		  , class_objective
		  , class_subject
		  , class_student
		  , class_start_date
		  , class_end_date
		  , mem_no
		  , class_approval
		  , class_status
		  , class_fee
		  , class_signup_date
		  )
		  values
		  (
		    seq_clno.nextval 
		  ,	#{classTitle}
		  ,	#{classContent}
		  ,	#{classObjective}
		  ,	#{classSubject}
		  ,	#{classStudent}
		  ,	#{classStartDate}
		  ,	#{classEndDate}
		  , #{memNo}
		  , default
		  , default
		  ,	#{classFee}
		  , sysdate
		  )
	</insert>
	
	<select id="selectAdminListCount" resultType="_int">
		select
		       count(*)
		  from tb_class
		 where class_status = 'Y'
		   and class_approval = 2
	</select>
	
	<select id="adminLectureList" resultMap="teacherResult">
		select
		       class_no
		     , class_title
		     , class_content
		     , class_objective
		     , class_subject
		     , class_student
		     , class_start_date
		     , class_end_date
		     , c.mem_no
		     , class_approval
		     , class_fee
		     , class_signup_date
		     , mem_name
		  from tb_class c
		  join tb_member m on(c.mem_no = m.mem_no)
		 where class_status = 'Y'
		   and class_approval = 2
         order
            by class_no desc
	</select>
	
	<select id="selectAppListCount" resultType="_int">
		select
		       count(*)
		  from tb_class
		 where class_status = 'N'
		   and class_approval = 1 
		    or class_approval = 3
	</select>
	
	<select id="adminAppLectureList" resultMap="teacherResult">
		select
		       class_no
		     , class_title
		     , class_content
		     , class_objective
		     , class_subject
		     , class_student
		     , class_start_date
		     , class_end_date
		     , c.mem_no
		     , class_approval
		     , class_fee
		     , class_signup_date
		     , mem_name
		  from tb_class c
		  join tb_member m on(c.mem_no = m.mem_no)
		 where class_status = 'N'
		   and class_approval = 1 
		    or class_approval = 3
         order
            by class_no desc
	</select>
	
	<select id="adminLectureDetailSelect" resultMap="teacherResult">
		select
			 class_no
		     , class_title
		     , class_content
		     , class_objective
		     , class_subject
		     , class_student
		     , class_start_date
		     , class_end_date
		     , c.mem_no
		     , class_approval
		     , class_fee
		     , class_signup_date
		     , mem_name
		  from tb_class c
		  join tb_member m on(c.mem_no = m.mem_no)
		 where class_no = #{classNo}    
	</select>
	
	<update id="adminLectureUpdate">
		update
		       tb_class
		   set class_title = #{classTitle}
		     , mem_no = #{memNo}
		     , class_start_date = #{classStartDate}
		     , class_end_date = #{classEndDate}
		     , class_fee = #{classFee}
		     , class_signup_date = sysdate
		     , class_content = #{classContent}
		 where class_no = #{classNo}  
	</update>
	
	
	
	
	
	
	
	
	
	
	
</mapper>